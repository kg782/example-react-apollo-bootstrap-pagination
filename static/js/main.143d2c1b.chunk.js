(this["webpackJsonpapra-coding-challenge"]=this["webpackJsonpapra-coding-challenge"]||[]).push([[0],{164:function(e,t,n){},302:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),l=n(30),i=n.n(l),o=(n(164),n(66)),r=n(153),s=n(34),j=n(65),d=n(158),u=n(157),b=n(44),h=n(38),O=n(31),x=n(64),p=n(60),v=n(159),m=n(154),C=n.n(m),g=n(7);var f=function(e){var t=e.photo,n=e.onSelect,a=Object(c.useCallback)((function(){return n(t)}),[n,t]);return Object(g.jsxs)("tr",{onClick:a,children:[Object(g.jsx)("td",{children:t.id}),Object(g.jsx)("td",{children:t.title}),Object(g.jsx)("td",{children:Object(g.jsx)(p.a,{src:t.thumbnailUrl,rounded:!0,fluid:!0})})]})};var k,S=function(e){var t=e.page,n=e.active,a=e.onSelect,l=Object(c.useCallback)((function(){return a(t)}),[t,a]);return Object(g.jsx)(O.a.Item,{active:n,onClick:l,children:t},t)},y=Object(s.gql)(k||(k=Object(r.a)(["\n  query Photos($q: String, $page: Int, $limit: Int) {\n    photos(\n      options: { paginate: { page: $page, limit: $limit }, search: { q: $q } }\n    ) {\n      data {\n        id\n        title\n        url\n        thumbnailUrl\n      }\n      meta {\n        totalCount\n      }\n    }\n  }\n"])));var I=function(){var e,t,n,a,l,i,r,m=Object(c.useState)(""),k=Object(o.a)(m,2),I=k[0],q=k[1],w=Object(c.useState)(1),N=Object(o.a)(w,2),$=N[0],F=N[1],M=Object(c.useState)(null),P=Object(o.a)(M,2),B=P[0],L=P[1],T=Object(s.useQuery)(y,{variables:{q:I,page:$,limit:5}}),A=T.loading,D=T.error,E=T.data,H=Object(c.useCallback)((function(e){q(e.target.value),F(1)}),[q,F]),J=Object(c.useCallback)((function(e){return L(e)}),[L]),U=Object(c.useCallback)((function(){return L(null)}),[L]),z=Object(c.useCallback)((function(){return F(1)}),[F]),G=(null===E||void 0===E||null===(e=E.photos)||void 0===e||null===(t=e.meta)||void 0===t?void 0:t.totalCount)?Math.ceil((null===E||void 0===E||null===(n=E.photos)||void 0===n||null===(a=n.meta)||void 0===a?void 0:a.totalCount)/5):0,Q=Object(c.useCallback)((function(){return F(G)}),[F,G]),K=Object(c.useCallback)((function(){return F($-1)}),[F,$]),R=Object(c.useCallback)((function(){return F($+1)}),[F,$]);return D?Object(g.jsx)("p",{children:"Error"}):Object(g.jsxs)("div",{children:[Object(g.jsxs)(u.a,{className:"mt-5",children:[Object(g.jsx)(j.a,{as:b.a,children:Object(g.jsx)(j.a.Group,{controlId:"search",as:h.a,children:Object(g.jsx)(j.a.Control,{type:"text",placeholder:"Search keywords on title",value:I,onChange:H})})}),Object(g.jsxs)(d.a,{striped:!0,bordered:!0,hover:!0,as:b.a,children:[Object(g.jsx)("thead",{children:Object(g.jsxs)("tr",{children:[Object(g.jsx)("th",{children:"ID"}),Object(g.jsx)("th",{children:"Title"}),Object(g.jsx)("th",{children:"Thumbnail"})]})}),Object(g.jsx)("tbody",{children:(null===E||void 0===E||null===(l=E.photos)||void 0===l?void 0:l.data)&&E.photos.data.map((function(e){return Object(g.jsx)(f,{photo:e,onSelect:J},e.id)}))})]}),A&&Object(g.jsx)(b.a,{children:Object(g.jsx)(h.a,{children:Object(g.jsx)(v.a,{animation:"border",role:"status",children:Object(g.jsx)("span",{className:"sr-only",children:"Loading..."})})})}),Object(g.jsx)(b.a,{children:Object(g.jsx)(h.a,{className:"clearfix",children:(null===E||void 0===E||null===(i=E.photos)||void 0===i||null===(r=i.meta)||void 0===r?void 0:r.totalCount)?Object(g.jsxs)(O.a,{className:"float-right",children:[Object(g.jsx)(O.a.First,{onClick:z,disabled:1===$}),Object(g.jsx)(O.a.Prev,{onClick:K,disabled:1===$}),C()(Math.max(1,$-2),Math.min(G+1,$+3)).map((function(e){return Object(g.jsx)(S,{page:e,active:e===$,onSelect:F},e)})),Object(g.jsx)(O.a.Next,{onClick:R,disabled:$===G}),Object(g.jsx)(O.a.Last,{onClick:Q,disabled:$===G})]}):null})})]}),Object(g.jsxs)(x.a,{show:!!B,onHide:U,animation:!1,children:[Object(g.jsx)(x.a.Header,{closeButton:!0}),Object(g.jsx)(x.a.Body,{children:Object(g.jsx)(p.a,{src:null===B||void 0===B?void 0:B.url,className:"w-100"})})]})]})},q=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,304)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,l=t.getLCP,i=t.getTTFB;n(e),c(e),a(e),l(e),i(e)}))},w=(n(300),new s.ApolloClient({uri:"https://graphqlzero.almansi.me/api",cache:new s.InMemoryCache}));i.a.render(Object(g.jsx)(a.a.StrictMode,{children:Object(g.jsx)(s.ApolloProvider,{client:w,children:Object(g.jsx)(I,{})})}),document.getElementById("root")),q()}},[[302,1,2]]]);
//# sourceMappingURL=main.143d2c1b.chunk.js.map